"use strict";(()=>{var e={};e.id=111,e.ids=[111],e.modules={8013:e=>{e.exports=require("mongodb")},1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},481:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{PUT:()=>c});var i=t(9303),o=t(8716),a=t(670),s=t(7070),d=t(4184),p=t(6110),u=t(8013);async function c(e,{params:r}){try{await (0,d.Z)();let{id:t}=r,n=e.nextUrl.searchParams.get("newRating");if(!t)throw Error("Please pass id");let i={rating:Number(n)},o=await p.p.findByIdAndUpdate(new u.ObjectId(t),{$set:i},{new:!0});return console.log(`newRating: ${n}`),console.log(`id: ${t}`),s.NextResponse.json(o,{status:200})}catch(e){return console.error("Error adding recipe:",e),s.NextResponse.json({error:"Failed to add recipe"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/recipe/like/[id]/route",pathname:"/api/recipe/like/[id]",filename:"route",bundlePath:"app/api/recipe/like/[id]/route"},resolvedPagePath:"/Users/juhanakarhunen-exove/Documents/Personal/RecipesApp-NextJS/src/app/api/recipe/like/[id]/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h}=l,v="/api/recipe/like/[id]/route";function y(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},4184:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(1185),i=t.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable in .env.local");let a={conn:null,promise:null},s=async function(){return a.conn||(a.promise||(a.promise=i().connect(o,{bufferCommands:!1}).then(e=>e)),a.conn=await a.promise),a.conn}},6110:(e,r,t)=>{t.d(r,{p:()=>d});var n=t(1185),i=t.n(n);let o=new n.Schema({name:{type:String,required:!0},quantity:{type:Number,required:!0},unit:{type:String,required:!0}}),a=new n.Schema({text:{type:String,required:!0},order:{type:Number,required:!0}}),s=new n.Schema({name:{type:String,required:!0},estimatedTime:{type:Number,required:!0},rating:{type:Number,required:!0},categories:[{type:String,required:!0}],tags:[{type:String,required:!0}],instructions:[a],ingredients:[o],image:{data:Buffer,contentType:String}});s.set("toJSON",{transform:(e,r)=>{r.id=r._id.toString(),delete r._id,delete r.__v}}),a.set("toJSON",{transform:(e,r)=>{delete r._id,delete r.__v}}),o.set("toJSON",{transform:(e,r)=>{delete r._id,delete r.__v}});let d=i().models.Recipe||i().model("Recipe",s)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[948,972],()=>t(481));module.exports=n})();