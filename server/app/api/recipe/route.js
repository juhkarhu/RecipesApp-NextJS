"use strict";(()=>{var e={};e.id=813,e.ids=[813],e.modules={8013:e=>{e.exports=require("mongodb")},1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5279:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h});var n={};t.r(n),t.d(n,{GET:()=>l,POST:()=>c});var i=t(9303),o=t(8716),a=t(670),s=t(7070),p=t(4184),u=t(6110),d=t(8013);async function c(e){try{await (0,p.Z)();let r=await e.json(),t=new u.p(r),n=await t.save();return s.NextResponse.json(n,{status:201})}catch(e){return console.error("Error adding recipe:",e),s.NextResponse.json({error:"Failed to add recipe"},{status:500})}}async function l(e){try{await (0,p.Z)();let{searchParams:r}=new URL(e.url),t=r.get("id"),n={};t&&(n={_id:new d.ObjectId(t)});let i=await u.p.find(n);return s.NextResponse.json(i,{status:200})}catch(e){return console.error("Error fetching recipes:",e),s.NextResponse.json({error:"Failed to fetch recipes"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/recipe/route",pathname:"/api/recipe",filename:"route",bundlePath:"app/api/recipe/route"},resolvedPagePath:"/Users/juhanakarhunen-exove/Documents/Personal/RecipesApp-NextJS/src/app/api/recipe/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:v}=m,f="/api/recipe/route";function y(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},4184:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(1185),i=t.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable in .env.local");let a={conn:null,promise:null},s=async function(){return a.conn||(a.promise||(a.promise=i().connect(o,{bufferCommands:!1}).then(e=>e)),a.conn=await a.promise),a.conn}},6110:(e,r,t)=>{t.d(r,{p:()=>p});var n=t(1185),i=t.n(n);let o=new n.Schema({name:{type:String,required:!0},quantity:{type:Number,required:!0},unit:{type:String,required:!0}}),a=new n.Schema({text:{type:String,required:!0},order:{type:Number,required:!0}}),s=new n.Schema({name:{type:String,required:!0},estimatedTime:{type:Number,required:!0},rating:{type:Number,required:!0},categories:[{type:String,required:!0}],tags:[{type:String,required:!0}],instructions:[a],ingredients:[o],image:{data:Buffer,contentType:String}});s.set("toJSON",{transform:(e,r)=>{r.id=r._id.toString(),delete r._id,delete r.__v}}),a.set("toJSON",{transform:(e,r)=>{delete r._id,delete r.__v}}),o.set("toJSON",{transform:(e,r)=>{delete r._id,delete r.__v}});let p=i().models.Recipe||i().model("Recipe",s)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[948,972],()=>t(5279));module.exports=n})();