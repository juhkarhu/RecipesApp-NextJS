(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{7713:function(e,t,r){Promise.resolve().then(r.bind(r,3037))},1967:function(e,t,r){"use strict";var a=r(7437),s=r(2265),n=r(2018);t.default=e=>{let{recipeId:t}=e,[r,i]=(0,s.useState)();if((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/recipe".concat(t?"?id=".concat(t):""));if(!e.ok)throw Error("Recipe not found");let r=await e.json();r.length>0?i(r[0]):console.warn("No recipe found with the given ID")}catch(e){console.error("Error fetching the recipe:",e)}})()},[t]),!r)return(0,a.jsx)("p",{className:"text-white",children:"Loading..."});let c=async(e,t)=>{console.log("Did you like the recipe? Answer: ".concat(t));let a=t?Math.min(r.rating+.1,5):Math.max(r.rating-.1,0);try{await (0,n.L9)(e,Number(a.toFixed(1)))}catch(e){console.error("Error creating recipe:",e)}},{id:l="",name:o="",rating:d="",tags:h=[],categories:u=[],ingredients:m=[],instructions:x=[]}=r;return(0,a.jsxs)("div",{className:"p-6 bg-gray-900 text-white rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-4",children:o}),(0,a.jsxs)("h2",{className:"text-l font-bold mb-4",children:["Rating: ",d]}),(0,a.jsx)("button",{onClick:async()=>{await c(l,!0)},className:"bg-red-600 text-white px-2 py-1 rounded mt-2",children:"\uD83D\uDC4D"}),(0,a.jsx)("button",{onClick:async()=>{await c(l,!1)},className:"bg-red-600 text-white px-2 py-1 rounded mt-2",children:"\uD83D\uDC4E"}),(0,a.jsx)("div",{className:"mb-4",children:h.length>0?h.map((e,t)=>(0,a.jsx)("span",{className:"inline-block bg-gray-700 rounded px-2 py-1 mr-2 text-sm",children:e},t)):(0,a.jsx)("span",{children:"No tags available"})}),(0,a.jsxs)("div",{className:"bg-gray-800 p-4 mb-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-bold text-xl mb-2",children:"CATEGORIES"}),(0,a.jsx)("div",{className:"mb-4",children:u.length>0?u.map((e,t)=>(0,a.jsx)("span",{className:"inline-block bg-gray-700 rounded px-2 py-1 mr-2 text-sm",children:e},t)):(0,a.jsx)("span",{children:"No categories available"})})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 p-4 bg-gray-800 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-bold text-xl mb-2",children:"YOU NEED THESE"}),(0,a.jsx)("ul",{className:"list-decimal pl-5",children:m.length>0?m.map((e,t)=>(0,a.jsxs)("li",{className:"list-disc mb-2",children:[e.quantity," ",e.unit," ",e.name]},t)):(0,a.jsx)("li",{children:"No ingredients available"})})]}),(0,a.jsxs)("div",{className:"flex-1 p-4 bg-gray-800 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-bold text-xl mb-2",children:"THIS IS HOW YOU COOK"}),(0,a.jsx)("ol",{className:"list-decimal pl-5",children:x.length>0?x.map((e,t)=>(0,a.jsx)("li",{className:"mb-2",children:e.text},t)):(0,a.jsx)("li",{children:"No instructions available"})})]})]})]})}},3037:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),s=r(2265),n=r(7138),i=r(6463),c=r(1967),l=r(2018),o=e=>{let{recipes:t,refreshRecipes:r}=e,n=(0,i.useRouter)(),[o,d]=(0,s.useState)(!1),[h,u]=(0,s.useState)(null),m=(0,s.useRef)(null),x=async e=>{if(window.confirm("Are you sure you want to delete this recipe?"))try{console.log("delete ".concat(e," recipe")),await (0,l.Yc)(e),r(),n.push("/recipes")}catch(e){console.error("Error deleting the recipe:",e)}},p=e=>{u(e),d(!0)},g=()=>{d(!1),u(null)};return(0,s.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&g()};return o?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:[t.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg transform transition-transform hover:scale-105 hover:bg-sky-900",onClick:()=>{p(e.id)},children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-400 mb-2",children:["Estimated Time: ",e.estimatedTime," mins"]}),(0,a.jsxs)("p",{className:"text-yellow-500 mb-4",children:["Rating: ",e.rating]}),(0,a.jsx)("button",{onClick:async()=>{await x(e.id)},className:"bg-red-600 text-white px-2 py-1 rounded mt-2",children:"Delete"})]},e.id)),o&&h&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{ref:m,className:"bg-gray-900 p-6 rounded-lg max-h-[90vh] overflow-y-auto w-full max-w-2xl",children:[(0,a.jsx)(c.default,{recipeId:h}),(0,a.jsx)("button",{onClick:g,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded",children:"Close"}),(0,a.jsx)("button",{onClick:()=>{h&&n.push("/recipes/".concat(h))},className:"bg-green-600 text-white px-4 py-2 rounded",children:"Open"})]})})]})},d=()=>{let[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)(0),[l,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/recipe");if(!e.ok)throw Error("Failed to fetch recipes");let r=await e.json();t(r)}catch(e){console.error("Error fetching the recipes:",e)}})()},[r]),(0,a.jsx)("div",{className:"bg-gray-900 text-white min-h-screen",children:(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"RecipeApp"}),(0,a.jsx)(n.default,{href:"/recipes/add",children:(0,a.jsx)("button",{className:"bg-blue-600 text-white py-1 px-4 rounded float-right",children:"Add Recipe"})}),(0,a.jsx)("div",{className:"clear-both"}),(0,a.jsx)(o,{recipes:e,refreshRecipes:()=>{i(e=>e+1)}}),l&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg max-w-xl w-full relative",children:[(0,a.jsx)(c.default,{recipeId:l}),(0,a.jsx)("button",{onClick:()=>{d(null)},className:"absolute top-2 right-2 bg-red-600 text-white px-2 py-1 rounded",children:"Close"})]})})]})})}},2018:function(e,t,r){"use strict";r.d(t,{L9:function(){return s},Yc:function(){return n},eI:function(){return a}});let a=async e=>{try{let t=await fetch("".concat("","/api/recipe"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to add recipe")}return await t.json()}catch(e){throw console.error("Error adding recipe:",e),e}},s=async(e,t)=>{try{let r=await fetch("".concat("","/api/recipe/like/").concat(e,"?newRating=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"}});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update rating")}return await r.json()}catch(e){throw console.error("Error updating rating:",e),e}},n=async e=>{try{let t=await fetch("".concat("","/api/recipe/").concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete recipe")}return!0}catch(e){throw console.error("Error deleting recipe:",e),e}}}},function(e){e.O(0,[291,971,23,744],function(){return e(e.s=7713)}),_N_E=e.O()}]);