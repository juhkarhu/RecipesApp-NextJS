(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{7287:function(e,t,r){Promise.resolve().then(r.bind(r,9258))},9258:function(e,t,r){"use strict";r.r(t);var a=r(7437),n=r(2265),s=r(920),l=r(2018),i=r(4085),o=r.n(i);t.default=()=>{let e=["g","kg","ml","l","tl","rl","dl","kpl"],[t,r]=(0,n.useState)(""),[i,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[m,g]=(0,n.useState)([]),[h,p]=(0,n.useState)([]),[x,b]=(0,n.useState)([]),[y,j]=(0,n.useState)({id:"",name:"",estimatedTime:0,rating:0,categories:[],tags:[],instructions:[],ingredients:[]});(0,n.useEffect)(()=>{p(["Kana","Jauheliha","Soijarouhe","Tofu"]),b(["Mallan suosikki","Uuni","Paistinpannu"])},[]);let f=e=>{let t=[...i];t.splice(e,1),c(t)},N=(e,t,r)=>{c(a=>a.map((a,n)=>n!==e?a:{...a,[t]:r}))},v=async e=>{e.preventDefault();let t=y.instructions.map((e,t)=>({text:e.text,order:t+1})),r={id:(0,s.Z)(),name:y.name,estimatedTime:y.estimatedTime,rating:y.rating,categories:d,tags:m,ingredients:i,instructions:t};try{await (0,l.eI)(r)}catch(e){console.error("Error creating recipe:",e)}};return(0,a.jsx)("div",{className:"flex justify-center bg-gray-900 items-center",children:(0,a.jsxs)("div",{className:"p-6 bg-gray-900 text-white rounded-lg shadow-md max-w-xl w-full",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Add a New Recipe"}),(0,a.jsxs)("form",{onSubmit:v,className:"recipe-form",children:[(0,a.jsx)("div",{className:"mb-4 text-center w-full",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Title:"}),(0,a.jsx)("input",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",type:"text",value:y.name,onChange:e=>{j({...y,name:e.target.value})}})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Estimated Time (minutes):"}),(0,a.jsx)("input",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",type:"number",value:y.estimatedTime,onChange:e=>{j({...y,estimatedTime:Number(e.target.value)})}})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Rating:"}),(0,a.jsx)("input",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",type:"number",value:y.rating,onChange:e=>{j({...y,rating:Number(e.target.value)})}})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,a.jsx)("label",{className:"mb-4",children:"Categories:"}),(0,a.jsx)("select",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",multiple:!0,value:d,onChange:e=>{u(Array.from(e.target.selectedOptions,e=>e.value))},children:h.map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))})]}),(0,a.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,a.jsx)("label",{children:"Tags:"}),(0,a.jsx)("select",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",multiple:!0,value:m,onChange:e=>{g(Array.from(e.target.selectedOptions,e=>e.value))},children:x.map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))})]}),(0,a.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,a.jsx)("label",{children:"Chosen Ingredients:"}),(0,a.jsx)("ul",{className:"bg-gray-800 shadow rounded space-y-1 mt-2",children:i.map((t,r)=>(0,a.jsxs)("li",{className:"cursor-pointer hover:bg-gray-700 text-gray-300 px-3 py-2",children:[(0,a.jsx)("span",{children:t.name}),(0,a.jsx)("input",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",type:"number",placeholder:"Quantity",value:t.quantity,onChange:e=>{N(r,"quantity",Number(e.target.value))}}),(0,a.jsx)("select",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",value:t.unit,onChange:e=>{N(r,"unit",e.target.value)},children:e.map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))}),(0,a.jsx)("button",{className:"bg-green-700 hover:bg-green-800 text-gray-200 px-3 py-1 rounded mt-2",onClick:()=>{f(r)},children:"Remove"})]},r))})]}),(0,a.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,a.jsx)("label",{children:"Ingredients:"}),(0,a.jsx)(o(),{Component:"input",trigger:"",options:["Jauheliha","Jauhepossu","Suola","Pippuri","Kana","Sokeri","Soijarouhe","Tofu"],onChange:e=>{"string"==typeof e&&r(e)},onSelect:e=>{"string"==typeof e&&(c([...i,{name:e,quantity:0,unit:""}]),r(""))},className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2",value:t,placeholder:"Enter ingredient",matchAny:!0})]}),(0,a.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,a.jsx)("label",{children:"Instructions:"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("ol",{className:"list-decimal pl-5",children:y.instructions.map((e,t)=>(0,a.jsx)("li",{className:"mb-3",children:(0,a.jsx)("input",{className:"bg-gray-800 text-gray-300 border-gray-600 border rounded p-2 w-full",type:"text",value:e.text,onChange:e=>{let r=[...y.instructions];r[t].text=e.target.value,j({...y,instructions:r})}})},t))}),(0,a.jsx)("button",{type:"button",onClick:()=>{j(e=>({...e,instructions:[...e.instructions,{text:"",order:e.instructions.length+1}]}))},className:"bg-green-700 hover:bg-green-800 text-gray-200 px-3 py-1 rounded mt-2",children:"+"})]})]}),(0,a.jsx)("button",{className:"bg-blue-600 text-white py-1 px-4 rounded w-full",type:"submit",children:"Add Recipe"})]})]})})}},2018:function(e,t,r){"use strict";r.d(t,{L9:function(){return n},Yc:function(){return s},eI:function(){return a}});let a=async e=>{try{let t=await fetch("".concat("","/api/recipe"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to add recipe")}return await t.json()}catch(e){throw console.error("Error adding recipe:",e),e}},n=async(e,t)=>{try{let r=await fetch("".concat("","/api/recipe/like/").concat(e,"?newRating=").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"}});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update rating")}return await r.json()}catch(e){throw console.error("Error updating rating:",e),e}},s=async e=>{try{let t=await fetch("".concat("","/api/recipe/").concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete recipe")}return!0}catch(e){throw console.error("Error deleting recipe:",e),e}}}},function(e){e.O(0,[563,971,23,744],function(){return e(e.s=7287)}),_N_E=e.O()}]);